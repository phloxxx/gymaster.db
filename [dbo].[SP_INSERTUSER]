USE [GYMASTER]
GO
/****** Object:  StoredProcedure [dbo].[SP_INSERTUSER]    Script Date: 09/12/2024 12:47:07 am ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO

ALTER PROCEDURE [dbo].[SP_INSERTUSER]
    @USER_FNAME VARCHAR(50),
    @USER_LNAME VARCHAR(30),
    @USERNAME VARCHAR(20),
    @PASSWORD VARCHAR(15),
    @USER_TYPE VARCHAR(10)
AS
BEGIN
    IF EXISTS (SELECT 1 FROM [USER] WHERE USERNAME = @USERNAME)
    BEGIN
        RAISERROR('Username already exists. Please choose a different username.', 16, 1);
        RETURN;
    END

    INSERT INTO [USER] (USER_FNAME, USER_LNAME, USERNAME, [PASSWORD], USER_TYPE)
    VALUES (@USER_FNAME, @USER_LNAME, @USERNAME, @PASSWORD, UPPER(@USER_TYPE))
END
